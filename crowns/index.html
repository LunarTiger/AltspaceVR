<!DOCTYPE html>
<html>
<head>
	<title>Crowns</title>
	<script src="https://aframe.io/releases/0.7.0/aframe.js"></script>
	<script src="https://sdk.altvr.com/libs/altspace.js/2.9.0/altspace.min.js"></script>
</head>
<body>
	<a-scene position='0 0 0' altspace='fullspace: true' sync-system='author: Lunar; app: crowns; refUrl: https://altvr-apps.firebaseio.com/'>
		<a-mixin id='crown' position='0 .1 .015' scale='.11 .11 .11' rotation='0 180 0' obj-model='obj: model/crown.obj; mtl: model/crown.mtl' collapse-model></a-mixin>

		<a-mixin id='s-series-m01' position='0 .1 .015' scale='.11 .11 .11'></a-mixin>
		<a-mixin id='s-series-f01' position='0 .1 .03' scale='.11 .11 .11'></a-mixin>
		<a-mixin id='a-series-m01' position='0 .07 .01' scale='.1 .1 .1'></a-mixin>
		<a-mixin id='x-series-m02' position='0 .11 .05' scale='.1 .1 .1'></a-mixin>
		<a-mixin id='pod-classic' position='0 .1 .04' scale='.14 .14 .14'></a-mixin>
		<a-mixin id='robothead-propellerhead-01' position='0 .1 .08' scale='.12 .12 .12'></a-mixin>
		<a-mixin id='robothead-roundguy-01' position='0 .17 .025' scale='.17 .17 .17'></a-mixin>
		<a-mixin id='rubenoid' position='0 .11 .04' scale='.14 .14 .14'></a-mixin>
		
		<a-mixin id='sync' n-skeleton-parent='part: head' sync sync-n-skeleton-parent></a-mixin>
	</a-scene>
<script>
	var scene = document.querySelector('a-scene');
	scene.addEventListener('connected', function() {
		altspace.getUser().then(function(user){
			if (user.isModerator){
				var avatar = user.avatarInfo.sid;
				var avatars = ['s-series-m01','s-series-f01','a-series-m01','x-series-m02','pod-classic','robothead-propellerhead-01','robothead-roundguy-01'];
				if (avatars.indexOf(avatar) == -1) {
					avatar = 'rubenoid';
				}
				scene.systems['sync-system'].instantiate('crown ' + avatar + ' sync', scene);
			}
		});
	});
</script>		
</body>
</html>