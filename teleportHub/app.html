<!DOCTYPE html>
<html>
	<script>
		/*********************************************************************
		 *             Please note, I no longer use this script.             *
		 *  Instead, I use shane's editor. This code is just an example.     *
		 *                The scene is avaliable here:                       *
		 *                 http://shanesedit.org/r/9m                        *
		 *                                                                   *
		 *********************************************************************/
	</script>
	<head>
		<meta charset="UTF-8">
		<title>Teleport Hub</title>
		<meta name="Teleport Hub" content="Teleport Hub">
		<!--Calling on aframes JS-->
		<script src="https://aframe.io/releases/0.3.0/aframe.js"></script>
		<!--Calling on the Altspace SDK js-->
		<script src="https://sdk.altvr.com/libs/altspace.js/2.6.2/altspace.min.js"></script>
	</head>
	<body>
		<!-- Starting the scene, defining the alignment of the scene to the bottom of the boundary box-->
		<a-scene altspace='vertical-align: bottom'>
			<!--Asset Loading-->
			<!--<a-assets> 
			</a-assets>-->
			<!--Make a boundary box and load badges-->
			<!--<a-entity n-layout-browser="url:https://lunartiger.github.io/AltspaceVR/Badge/Badges_by_Ben.html?altspace-sync-instance=-L6JmH6lacq_WR9FPIvR;isEnclosure:true;"></a-entity>-->
			<!--Ending the scene--> 
		</a-scene>
		<!--Load Portals-->
		<script type="text/javascript">
			//Public Spaces
			var public_spaces = document.createElement('a-entity');
			public_spaces.setAttribute('n-text','fontSize: 4; text:Public Spaces');
			public_spaces.setAttribute('rotation','0 0 0');
			public_spaces.setAttribute('position','0 3.4 -10');
			document.querySelector('a-scene').appendChild(public_spaces);
			var public = [
				{name:"Spire 4",space:'event-606878869948990299-848',},
				{name:"Lobby",space:'lobby'},
				{name:"Campfire",space:'campfire-lobby'},
				{name:"Miguel's<br>Party Plaza",space:'explorer-ncb-party-plaza'},
			]
			var dp=-3;
			for (count = 0; count < public.length; count++){
				var portal_entity = document.createElement('a-entity');
				var text_entity = document.createElement('a-entity');
				portal_entity.setAttribute('n-portal','targetSpace:'+public[count].space);
				portal_entity.setAttribute('rotation','0 0 0');
				portal_entity.setAttribute('position',dp+' 0.2 -10');
				text_entity.setAttribute('n-text',"fontSize: 2; text:"+public[count].name);
				text_entity.setAttribute('rotation','0 0 0');
				text_entity.setAttribute('position',dp+' 0.7 -10');
				dp=dp+2;
				document.querySelector('a-scene').appendChild(portal_entity);
				document.querySelector('a-scene').appendChild(text_entity);
			}
			//Lunar's Spaces
			var lunar_spaces = document.createElement('a-entity');
			lunar_spaces.setAttribute('n-text',"fontSize: 4; text:Lunar's Spaces");
			lunar_spaces.setAttribute('rotation','0 90 0');
			lunar_spaces.setAttribute('position','-10 3.4 0');
			document.querySelector('a-scene').appendChild(lunar_spaces);
			var lunar = [
				{name:"Unholy HaH",space:'adultier-hah',},
				{name:"La Hoguera",space:'la-hoguera'},
				{name:"Lunar's<br>Tavern",space:'lunar-s-medieval-tavern'},
				{name:"Glitchy House",space:'glitchy-house'},
			]
			dp=3;
			for (count = 0; count < lunar.length; count++){
				var portal_entity = document.createElement('a-entity');
				var text_entity = document.createElement('a-entity');
				portal_entity.setAttribute('n-portal','targetSpace:'+lunar[count].space);
				portal_entity.setAttribute('rotation','0 90 0');
				portal_entity.setAttribute('position','-10 0.2 '+dp);
				text_entity.setAttribute('n-text',"fontSize: 2; text:"+lunar[count].name);
				text_entity.setAttribute('rotation','0 90 0');
				text_entity.setAttribute('position','-10 0.7 '+dp);
				dp=dp-2;
				document.querySelector('a-scene').appendChild(portal_entity);
				document.querySelector('a-scene').appendChild(text_entity);
			}
			//User Spaces
			var user_spaces = document.createElement('a-entity');
			user_spaces.setAttribute('n-text','fontSize: 4; text:User Created Spaces');
			user_spaces.setAttribute('rotation','0 180 0');
			user_spaces.setAttribute('position','0 3.4 10');
			document.querySelector('a-scene').appendChild(user_spaces);
			var user = [
				{name:"FACEMAN<br>Space Hub",space:'faceman-space-hub',},
				{name:"Andy's Vortex<br>Tunnel",space:'andy-s-vortex-tunnel-sdk'},
				{name:"Pac-Man",space:'pac-man'},
				{name:"Ben's<br>Toy House",space:'event-862654090620961312'},
				{name:"Ben's<br>Test House",space:'test-house'},
				{name:"Reggie's Octo<br>Space 2",space:'experience-space-614783891072352897'},
				{name:"Tanabe's Hub",space:'event-684682152100496156'},
				{name:"Uganda",space:'event-855383141190206287'},
			]
			dp=7;
			for (count = 0; count < user.length; count++){
				var portal_entity = document.createElement('a-entity');
				var text_entity = document.createElement('a-entity');
				portal_entity.setAttribute('n-portal','targetSpace:'+user[count].space);
				portal_entity.setAttribute('rotation','0 180 0');
				portal_entity.setAttribute('position',dp+' 0.2 10');
				text_entity.setAttribute('n-text',"fontSize: 2; text:"+user[count].name);
				text_entity.setAttribute('rotation','0 190 0');
				text_entity.setAttribute('position',dp+' 0.7 10');
				dp=dp-2;
				document.querySelector('a-scene').appendChild(portal_entity);
				document.querySelector('a-scene').appendChild(text_entity);
			}
			//Jacob's Spaces
			var jacob_spaces = document.createElement('a-entity');
			user_spaces.setAttribute('n-text','fontSize: 4; text:User Created Spaces');
			user_spaces.setAttribute('rotation','0 270 0');
			user_spaces.setAttribute('position','0 3.4 10');
			document.querySelector('a-scene').appendChild(user_spaces);
			var user = [
				{name:"Abstract Spikes",space:'abstract-spikes',},
				{name:"After Party Room",space:'after-party-event-space'},
				{name:"Alien Environment",space:'alien-environment'},
				{name:"Minecraft",space:'altmincraft'},
				{name:"Paradise Islands:<br>An Altipelago",space:'event-892033901281674085'},
				{name:"Particles Fun!",space:'particles-fun'},
				{name:"Psychedelic Fire",space:'psychedelic-fire'},
				{name:"Tower of Doom",space:'tower-of-doom'},
				{name:"Waterworld",space:'event-892036419155919809'},
				{name:"JGI Z18 Artillery Cannon",space:'jgi-z18-artillery-cannon'},
			]
			dp=-9;
			for (count = 0; count < user.length; count++){
				var portal_entity = document.createElement('a-entity');
				var text_entity = document.createElement('a-entity');
				portal_entity.setAttribute('n-portal','targetSpace:'+user[count].space);
				portal_entity.setAttribute('rotation','0 270 0');
				portal_entity.setAttribute('position','10 0.2 '+dp);
				text_entity.setAttribute('n-text',"fontSize: 2; text:"+user[count].name);
				text_entity.setAttribute('rotation','0 270 0');
				text_entity.setAttribute('position','10 0.7 '+dp);
				dp=dp+2;
				document.querySelector('a-scene').appendChild(portal_entity);
				document.querySelector('a-scene').appendChild(text_entity);
			}
			//Pay no attention to the following lines of code
			//Didn't I just say to pay no attention to this
			//I should have known an elite haxxor like yourself wouldn't follow directions
			var hidden = ['820629041114514394','854702168379228532','821914120528855813','582115151281389721','821385466442940567','382123859119177848','841002676610138609','805838205118054726','754988950141010665','670918140376383562','403147243432968910','707158522659340439','846089948032401741','379858308179165566','418432630325773017'];
			var pokesmot = ['820629041114514394','821914120528855813','846089948032401741'];
			altspace.getUser()
			.then(function(user){
				if (user.legacyUserId){user.userId = user.legacyUserId;}
				var dataRequest = (THREE.FileLoader ? new THREE.FileLoader() : new THREE.XHRLoader(/* DEPRECATED: r83 */));
				dataRequest.setWithCredentials(true);
				dataRequest.load('https://account.altvr.com/api/v1/users/' + user.userId, onLoaded, undefined, undefined);
				function onLoaded(obj) {
					var isAdmin = false;
					var roles = JSON.parse(obj).users[0].roles;
					if(roles.indexOf('admin') != -1 || roles.indexOf('roadteam') != -1){isAdmin = true;}
					if(hidden.filter(function(id){return id===user.userId}).length || pokesmot.filter(function(id){return id===user.userId}).length || isAdmin){
						var hidden_text_entity = document.createElement('a-entity');
						hidden_text_entity.setAttribute('n-text','fontSize: 15; text:Hidden Portals');
						hidden_text_entity.setAttribute('rotation','0 -90 0');
						hidden_text_entity.setAttribute('position','63 6 0');
						document.querySelector('a-scene').appendChild(hidden_text_entity);
					}
					if(hidden.filter(function(id){return id===user.userId}).length || isAdmin){
						var hidden_portal_entity = document.createElement('a-entity');
						var hidden_text_entity = document.createElement('a-entity');
						hidden_portal_entity.setAttribute('n-portal','targetSpace: new-user-info');
						hidden_portal_entity.setAttribute('rotation','0 -90 0');
						hidden_portal_entity.setAttribute('position','63 0.2 -1');
						hidden_text_entity.setAttribute('n-text','fontSize: 2; text:New User<br>Info');
						hidden_text_entity.setAttribute('rotation','0 -90 0');
						hidden_text_entity.setAttribute('position','63 0.7 -1');
						document.querySelector('a-scene').appendChild(hidden_portal_entity);
						document.querySelector('a-scene').appendChild(hidden_text_entity);
					}
					if(pokesmot.filter(function(id){return id===user.userId}).length || isAdmin){
						var hidden_portal_entity = document.createElement('a-entity');
						var hidden_text_entity = document.createElement('a-entity');
						hidden_portal_entity.setAttribute('n-portal','targetSpace: capt-cannabis-says-poke-smot');
						hidden_portal_entity.setAttribute('rotation','0 -90 0');
						hidden_portal_entity.setAttribute('position','63 0.2 1');
						hidden_text_entity.setAttribute('n-text',"fontSize: 2; text:Capt. Cannabis's<br>Grow Room");
						hidden_text_entity.setAttribute('rotation','0 -90 0');
						hidden_text_entity.setAttribute('position','63 0.7 1');
						document.querySelector('a-scene').appendChild(hidden_portal_entity);
						document.querySelector('a-scene').appendChild(hidden_text_entity);
					}
				}
			})
		</script>
	</body>
</html>
